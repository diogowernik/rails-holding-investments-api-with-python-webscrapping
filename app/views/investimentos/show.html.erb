<p id="notice"><%= notice %></p>

<p>
  <strong>Carteira:</strong>
  <%= @investimento.carteira.nome %>
</p>

<p>
  <strong>Quantidade:</strong>
  <%= @investimento.quantidade %>
</p>

<p>
  <strong>Ticker:</strong>
  <%= @investimento.ativo.ticker %>
</p>

<h3 class="h3-custom" id="minhas-paginas">
	<em class="fa fa-usd text-success"></em> &nbsp; Movimentação dos derivativos
</h3>
<div class="table-responsive">
	<table class="table table-striped table-bordered table-hover" id="DerivaMoveTable">
          <thead>
            <tr class="header">
              <th style="width: 140px;"> Derivativo</br>
              <input type="text" id="DerivaTivo" onkeyup="DerivaMoveTivoFunction()" placeholder="Derivativo.." class="form-control mt-1">
              </th>
              <th style="width: 140px;">Status </br> 
              <input type="text" id="DerivaStatus" onkeyup="DerivaMoveStatusFunction()" placeholder="Status.." class="form-control mt-1">
              </th>
              <th>Corretora</th>
              <th>Tipo</th>
              <th>Vencimento</th>
              <th>Premio</th>
              <th>Quant</th>
              <th>Resultado</th>
              <th></th>
              <th colspan="2"></th>
            </tr>
          </thead>
        
          <tbody>
            <% @investimento.deriva_moves.each do |dm| %>
              <tr>
  
                  
                  <td><%= dm.derivativo.codigo %></td>
                  <td><%= dm.estado.status %></td>
                  <td><%= dm.corretora.nome %></td>
                  <td><%= dm.derivativo.tipo %></td>
                  <td><% if dm.vencimento.present? %><%= dm.vencimento.data.strftime("%d/%m/%Y") %><% end %></td>
                  <td>R$ <%= number_with_precision(dm.valor, :precision => 2) %></td>
                  <td><%= dm.quantidade %></td>
                  <td>
                      <span class="text-primary"><%#= resultado_aberta(dm) %></span>
                      <span class="text-primary"><%#= resultado_po(dm) %></span>
                      <span class="text-primary"><%#= resultado_exercicio(dm) %></span>
                      <span class="text-<%#= cor_resultado_recompra(dm) %>"><%#= resultado_recompra(dm) %></span>
                      
                  </td>
                  <td><%= dm.resultado %></td>
                  <td><%= link_to 'Edit', edit_deriva_move_path(dm) %></td>
                  <td><%= link_to 'Destroy', dm, method: :delete, data: { confirm: 'Are you sure?' } %></td>
                </tr>
            <% end %>
          </tbody>
    </table>
</div>

<%= link_to 'Edit', edit_investimento_path(@investimento) %> |
<%= link_to 'Back', investimentos_path %>
