<%= form_tag ativo_moves_path, method: :get, enforce_utf8: false do %>
    <div class="row">
        <div class="col-md-2 mt-4 mb-4">
            <%= select_tag :por_carteira, options_for_select(Carteira.all.collect {|t| [t.nome, t.id]}, selected: params[:por_carteira]), prompt: 'Carteira', class: 'form-control' %>
        </div>
        <div class="col-md-2 mt-4 mb-4">
            <%= select_tag :por_tipo, options_for_select(Tipo.all.collect {|t| [t.nome, t.id]}, selected: params[:por_tipo]), prompt: 'Tipo', class: 'form-control' %>
        </div>
        <div class="col-md-2 mt-4 mb-4">
            <%= select_tag :por_corretora, options_for_select(Corretora.all.collect {|t| [t.nome, t.id]}, selected: params[:por_corretora]), prompt: 'Corretora', class: 'form-control' %>
        </div>
        <div class="col-md-2 mt-4 mb-4">
            <%= select_tag :por_ativo, options_for_select(Ativo.all.collect {|t| [t.ticker, t.id]}, selected: params[:por_ativo]), prompt: 'Ativo', class: 'form-control' %>
        </div>
        <!--Como colocar mais informações no options_for_select-->
        <div class="col-md-2 mt-4 mb-4">
            <%= select_tag :por_investimento, options_for_select(Investimento.all.collect {|t| [t.ativo.ticker, t.id]}, selected: params[:por_investimento]), prompt: 'Investimento', class: 'form-control' %>
        </div>
        <div class="col-md-2 mt-4 mb-4">
            <%= submit_tag 'Filtrar', class: 'btn btn-default', name: nil %>
        </div>
    </div>
<% end %> 

<div class="float-right"><%= link_to new_ativo_move_path do %>
	<button class="btn btn-outline-success">
		<em class="fa fa-plus-circle"></em> &nbsp; Nova movimentação (Ativos)
	</button><% end %>
</div>
<h3 class="h3-custom" id="minhas-paginas">
	<em class="fa fa-usd text-success"></em> &nbsp; Movimentação dos ativos
</h3>
<div class="table-responsive">
	<table class="table table-striped table-bordered table-hover">
  <thead>
    <tr>
      <th>Carteira</th>
      <th>Valor</th>
      <th>Data</th>
      <th>Quantidade</th>
      <th>Movimento</th>
      <th>Tipo</th>
      <th>Ativo</th>
      <th>Essa ordem criou ou </br> atualizou investimento em:</th>
      <th>Corretora</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @ativo_moves.each do |ativo_move| %>
      <tr>
        <td><%= ativo_move.carteira.nome %></td>
        <td><%= ativo_move.valor %></td>
        <td><%= ativo_move.data %></td>
        <td><%= ativo_move.quantidade %></td>
        <td><%= ativo_move.movimento %></td>
        <td><%= ativo_move.tipo.nome %></td>
        <td><%= ativo_move.ativo.ticker %></td>
        <td><%= ativo_move.investimento.carteira.nome %> / <%= ativo_move.investimento.tipo.nome %> / </br>
        <%= ativo_move.investimento.corretora.nome %> / <%= ativo_move.investimento.ativo.ticker %> &nbsp;  
        <%= link_to edit_investimento_path(ativo_move.investimento) do %><em class="fa fa-pencil"></em><% end %>
        </td>
        <td><%= ativo_move.corretora.nome %></td>
        <td><%= link_to 'Show', ativo_move %></td>
        <td><%= link_to 'Edit', edit_ativo_move_path(ativo_move) %></td>
        <td><%= link_to 'Destroy', ativo_move, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>
</div>
