<!DOCTYPE html>
<html>
  <head>
    <title>Minha Holding</title>
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track': 'reload' %>
    <%= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css" integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.20/css/jquery.dataTables.min.css">
    <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.20/js/jquery.dataTables.min.js"></script>
    <%= javascript_include_tag "http://www.google.com/jsapi", "chartkick" %>  
    <%= javascript_include_tag "chartkick", "chartkick" %>
  </head>

  <body>
  <%= render partial: "layouts/topnavbar" %>
        <div class="container-fluid mt-4">
            <div class="row">
                <div class="col-xl-3">
                    <div class="card">  
                        <nav class="navbar navbar-expand navbar-light bg-white">
                            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                                <ul class="navbar-nav mr-auto">
                                    <li class="nav-item dropdown">
                                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        <%= @portfolio.title %>
                                        </a>
                                        <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                                            <% @portfolios.each do |portfolio| %>
                                                <% if portfolio.title != @portfolio.title %>  
                                                    <%= link_to portfolio_path(portfolio.id), class: "dropdown-item" do %>
                                                        <% portfolio.title %>
                                                    <% end %>                       
                                                <% end %>
                                            <% end %>
                                        </div>
                                    </li>
                                </ul>

                                <ul class="navbar-nav">

                                    <li class="nav-item dropdown dropdown-list">
                                        <a class="nav-link dropdown-toggle dropdown-toggle-nocaret" href="#" data-toggle="dropdown">
                                            <i class="fas fa-lg fa-plus-circle text-primary"></i>
                                        </a>
                                        <div class="dropdown-menu dropdown-menu-right">
                                        <div class="dropdown-item">
                                            <div class="list-group">                                            
                                                <div class="list-group-item list-group-item-action">
                                                    <div class="media">
                                                        <%= link_to new_fii_folio_path(@portfolio.id), class: "dropdown-item" do %>
                                                            Adicionar Fundo Imobiliário
                                                        <% end %>  
                                                    </div>
                                                </div>                                            
                                                <div class="list-group-item list-group-item-action">
                                                    <div class="media">
                                                        <%= link_to new_portfolio_cripto_path, class: "dropdown-item" do %>
                                                            Adicionar Criptomoeda
                                                        <% end %>                                                                      
                                                    </div>
                                                </div>  
                                                <div class="list-group-item list-group-item-action">
                                                    <div class="media">
                                                        <%= link_to new_portfolio_br_stock_path, class: "dropdown-item" do %>
                                                            Adicionar Ação Brasileira
                                                        <% end %>                                                                      
                                                    </div>
                                                </div>   
                                                <div class="list-group-item list-group-item-action">
                                                    <div class="media">
                                                        <%= link_to new_portfolio_property_path, class: "dropdown-item" do %>
                                                            Adicionar Imóvel
                                                        <% end %>                                                                      
                                                    </div>
                                                </div>  
                                                <div class="list-group-item list-group-item-action">
                                                    <div class="media">
                                                        <%= link_to new_portfolio_call_path, class: "dropdown-item" do %>
                                                            Adicionar Call
                                                        <% end %>                                                                      
                                                    </div>
                                                </div>  
                                                <div class="list-group-item list-group-item-action">
                                                    <div class="media">
                                                        <%= link_to new_portfolio_put_path, class: "dropdown-item" do %>
                                                            Adicionar put
                                                        <% end %>                                                                      
                                                    </div>
                                                </div> 
                                                <div class="list-group-item list-group-item-action">
                                                    <div class="media">
                                                        <%= link_to new_portfolio_subscription_path, class: "dropdown-item" do %>
                                                            Adicionar subscrições
                                                        <% end %>                                                                      
                                                    </div>
                                                </div> 
                                                <div class="list-group-item list-group-item-action">
                                                    <div class="media">
                                                        <%= link_to new_portfolio_international_path, class: "dropdown-item" do %>
                                                            Adicionar Invest. Exterior
                                                        <% end %>                                                                      
                                                    </div>
                                                </div> 
                                                <div class="list-group-item list-group-item-action">
                                                    <div class="media">
                                                        <%= link_to new_portfolio_fixed_income_path, class: "dropdown-item" do %>
                                                            Adicionar Renda Fixa
                                                        <% end %>                                                                      
                                                    </div>
                                                </div>                                            
                                            </div>
                                        </div>
                                        </div>
                                    </li>

                                </ul>

                            </div>
                        </nav>    
                    </div>
                </div>
                <div class="col-xl-9">
                    <div class="card">
                        <nav class="navbar navbar-expand navbar-light bg-white">
                            <%# <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                                <span class="navbar-toggler-icon"></span>
                            </button> %>
                            <div class="collapse navbar-collapse" id="navbarNav">
                                <ul class="navbar-nav">
                                    
                                    <li class="nav-item">
                                        <%= link_to portfolio_path do %>
                                            <button class="btn btn-outline-primary 
                                            <%= 'active' if current_page?(portfolio_path) %>">
                                                Dashboard
                                            </button>
                                        <% end %>
                                    </li>
                                </ul>
                                <ul class="navbar-nav ml-3">
                                    
                                    <li class="nav-item">
                                        <%= link_to portfolio_fiis_management_path do %>
                                            <button 
                                            class="btn btn-outline-primary ml-3
                                            <%= 'active' if current_page?(portfolio_fiis_management_path) %>" >
                                                Fiis
                                            </button>
                                        <% end %>
                                    </li>
                                    <li class="nav-item">
                                        <%= link_to portfolio_br_stocks_management_path do %>
                                            <button 
                                            class="btn btn-outline-primary ml-3
                                            <%= 'active' if current_page?(portfolio_br_stocks_management_path) %>" >
                                                Ações Br
                                            </button>
                                        <% end %>
                                    </li>
                                    <li class="nav-item">
                                        <%= link_to portfolio_internationals_management_path do %>
                                            <button 
                                            class="btn btn-outline-primary ml-3
                                            <%= 'active' if current_page?(portfolio_internationals_management_path) %>" >
                                                Internacional
                                            </button>
                                        <% end %>
                                    </li>
                                    <li class="nav-item">
                                        <%= link_to portfolio_fixed_incomes_management_path do %>
                                            <button 
                                            class="btn btn-outline-primary ml-3
                                            <%= 'active' if current_page?(portfolio_fixed_incomes_management_path) %>" >
                                                Renda Fixa
                                            </button>
                                        <% end %>
                                    </li>
                                    <li class="nav-item">
                                        <%= link_to portfolio_properties_management_path do %>
                                            <button 
                                            class="btn btn-outline-primary ml-3
                                            <%= 'active' if current_page?(portfolio_properties_management_path) %>" >
                                                Imóveis
                                            </button>
                                        <% end %>
                                    </li>
                                    <li class="nav-item">
                                        <%= link_to portfolio_criptos_management_path do %>
                                            <button 
                                            class="btn btn-outline-primary ml-3
                                            <%= 'active' if current_page?(portfolio_criptos_management_path) %>" >
                                                Criptos
                                            </button>
                                        <% end %>
                                    </li>
                                    
                                    
                                    
                                </ul>
                                <ul class="navbar-nav ml-3">
                                     <li class="nav-item">
                                        <%= link_to portfolio_calls_management_path do %>
                                            <button 
                                            class="btn btn-outline-primary ml-3
                                            <%= 'active' if current_page?(portfolio_calls_management_path) %>" >
                                                Calls
                                            </button>
                                        <% end %>
                                    </li>
                                    <li class="nav-item">
                                        <%= link_to portfolio_puts_management_path do %>
                                            <button 
                                            class="btn btn-outline-primary ml-3
                                            <%= 'active' if current_page?(portfolio_puts_management_path) %>" >
                                                Puts
                                            </button>
                                        <% end %>
                                    </li>
                                </ul>
                            </div>
                        </nav>
                    
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-xl-12">
                    <% if alert %><div class="alert alert-success m-5 text-center"><%= alert %></div><% end %>
                    <% if notice %><div class="alert alert-success m-5 text-center"><%= notice %></div><% end %>
                </div>
                <%= yield %>    
                  
            </div>
        </div>
    </div>
<script>
$(document).ready( function () {
    $('table.display').DataTable({
        'paging': false, // Table pagination
        'ordering': true, // Column ordering
        'info': false, // Bottom left status text
        responsive: true,
        // columnDefs: [ { visible: true, orderable: false, targets: [3] } ],
        // "order": [[ 3, "desc" ]],
        "dom": '<"float-left mt-3"f><"clear">',
        responsive: true,
        oLanguage: {
            sSearch: '<em class="fa fa-search"></em>',
            sLengthMenu: '_MENU_ records per page',
            info: 'Showing page _PAGE_ of _PAGES_',
            zeroRecords: 'Nothing found - sorry',
            infoEmpty: 'No records available',
            infoFiltered: '(filtered from _MAX_ total records)',
            oPaginate: {
                sNext: '<em class="fa fa-caret-right"></em>',
                sPrevious: '<em class="fa fa-caret-left"></em>'
            }
        },
    });
} );
</script>
<style>
table.dataTable thead .sorting, table.dataTable thead .sorting_asc, table.dataTable thead .sorting_desc, table.dataTable thead .sorting_asc_disabled, table.dataTable thead .sorting_desc_disabled{
background-position: 5px center;
}
table.dataTable thead th, table.dataTable thead td {
padding: 10px 18px 10px 28px;           
}
</style>
  </body>
</html>